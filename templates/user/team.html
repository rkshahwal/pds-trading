{% extends 'base/base.html' %}
{% load static %}
{% block bc %}
<li class="breadcrumb-item">Users</li>
<li class="breadcrumb-item">Team</li>
{% endblock bc %}
{% block content %}

<div class="row">
    <div class="col">
        <div class="card">
            <!-- Card header -->
            <div class="card-header border-0">
                <h3 class="mb-0">{{title}} </h3>
                <h3 class="mb-0 float-end">{{total_recharged_user_count}}/{{total_user_count}} </h3>
            </div>
            {% csrf_token %}
            <!-- Light table -->
            <div class="card-body">
                {% comment %} Level 1 {% endcomment %}
                <div class="row mt-2 mt-lg-3 mt-md-3 mt-sm-3" data-bs-toggle="modal" data-bs-target="#exampleModal1">
                    <div class="col-11">
                        <p class="Level">Level 1</p>
                    </div>
                    <div class="col-1">
                        <p class="float-end me-1 Member"> <span class="font-medium"> {{recharged_l1_count}}/{{referred_by_users_l1.count}} </span></p>
                    </div>

                    <!-- Modal -->
                    <div class="modal fade" id="exampleModal1" tabindex="-1" aria-labelledby="exampleModal1Label" aria-hidden="true">
                        <div class="modal-dialog modal-dialog modal-dialog-centered modal-dialog-scrollable">
                        <div class="modal-content">
                            <div class="modal-header">
                            <h1 class="modal-title fw-semibold fs-4 text-dark" id="exampleModal1Label">Level 1 Team</h1>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                            <table class="table table-striped table-hover align-middle">
                                <thead>
                                <tr>
                                    <th scope="col">Mobile Number</th>
                                    <th scope="col">Recharge Amount</th>
                                    <th scope="col">Level</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for usr in referred_by_users_l1 %}
                                <tr>
                                    <td>{{ usr.referral_to.mobile_number }}</td>
                                    <td>{% if usr.referral_to.first_recharge %}{{ usr.referral_to.first_recharge }}{% endif %}</td>
                                    <td>{{ usr.level }}</td>
                                </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                            </div>
                        </div>
                        </div>
                    </div>
                    <!-- Modal -->
                </div>

                
                {% comment %} Level 2 {% endcomment %}
                <div class="row mt-2 mt-lg-3 mt-md-3 mt-sm-3" data-bs-toggle="modal" data-bs-target="#exampleModal2">
                    <div class="col-11">
                        <p class="Level">Level 2</p>
                    </div>
                    <div class="col-1">
                        <p class="float-end me-1 Member"> <span class="font-medium">{{ recharged_l2_count }}/{{referred_by_users_l2.count}} </span></p>
                    </div>

                    <!-- Modal -->
                    <div class="modal fade" id="exampleModal2" tabindex="-1" aria-labelledby="exampleModal2Label" aria-hidden="true">
                        <div class="modal-dialog modal-dialog modal-dialog-centered modal-dialog-scrollable">
                        <div class="modal-content">
                            <div class="modal-header">
                            <h1 class="modal-title fw-semibold fs-4 text-dark" id="exampleModal2Label">Level 2 Team</h1>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                            <table class="table table-striped table-hover align-middle">
                                <thead>
                                <tr>
                                    <th scope="col">Mobile Number</th>
                                    <th scope="col">Recharge Amount</th>
                                    <th scope="col">Level</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for usr in referred_by_users_l2 %}
                                <tr>
                                    <td>{{ usr.referral_to.mobile_number }}</td>
                                    <td>{% if usr.referral_to.first_recharge %}{{ usr.referral_to.first_recharge }}{% endif %}</td>
                                    <td>{{ usr.level }}</td>
                                </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                            </div>
                        </div>
                        </div>
                    </div>
                    <!-- Modal -->
                </div>

                
                {% comment %} Level 3 {% endcomment %}
                <div class="row mt-2 mt-lg-3 mt-md-3 mt-sm-3" data-bs-toggle="modal" data-bs-target="#exampleModal3">
                    <div class="col-11">
                        <p class="Level">Level 3</p>
                    </div>
                    <div class="col-1">
                        <p class="float-end me-1 Member"> <span class="font-medium">{{ recharged_l3_count }}/{{ referred_by_users_l3.count }} </span></p>
                    </div>

                    <!-- Modal -->
                    <div class="modal fade" id="exampleModal3" tabindex="-1" aria-labelledby="exampleModal3Label" aria-hidden="true">
                        <div class="modal-dialog modal-dialog modal-dialog-centered modal-dialog-scrollable">
                        <div class="modal-content">
                            <div class="modal-header">
                            <h1 class="modal-title fw-semibold fs-4 text-dark" id="exampleModal3Label">Level 3 Team</h1>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                            <table class="table table-striped table-hover align-middle">
                                <thead>
                                <tr>
                                    <th scope="col">Mobile Number</th>
                                    <th scope="col">Recharge Amount</th>
                                    <th scope="col">Level</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for usr in referred_by_users_l3 %}
                                <tr>
                                    <td>{{ usr.referral_to.mobile_number }}</td>
                                    <td>{% if usr.referral_to.first_recharge %}{{ usr.referral_to.first_recharge }}{% endif %}</td>
                                    <td>{{ usr.level }}</td>
                                </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                            </div>
                        </div>
                        </div>
                    </div>
                    <!-- Modal -->
                </div>



            </div>
        </div>  
    </div>
</div>
{% endblock content %}
{% block javascripts %}
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap4.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.5.0/js/dataTables.responsive.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.5.0/js/responsive.bootstrap4.min.js"></script>
 
{% endblock javascripts %}
